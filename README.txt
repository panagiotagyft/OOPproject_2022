Εργασία Μαθήματος

Παναγιώτα Γύφτου , Α.Μ. 1115201900318

1.Οι εντολές μεταγλώττισης του προγράμματος βρίσκονται στο αρχείο Makefile, δηλαδή η μεταγλώττιση γίνεται με το make.
2. Και τρέχω το πρόγραμμα: ./main 5 5 4 50
   (δηλ. N=5 NSegs=5 K=4 Percent=50)

3.
-Επιλογές κλάσεων:
Έχω 7 κλάσεις.Την Attiki_Odos, την Segment, την Entrance, την Toll, την Electronic, την Employee και την Vehicle.Η κλάση Toll είναι μια γενικότερη κλάση "υπερκλάση" και οι εξειδικεύσεις της είναι οι κλάσεις Electronic και Employee.Μέσω της κληρονομικότητας επιτυγχάνω την οργάνωση των διοδίων.

-Επιλογές ορατότητας μελών κλάσεων:
Στον private χώρο των κλάσεων Attiki_Odos, Segment, Entrance, Toll, Electronic, Employee και Vehicle έχω βάλει δεδομένα που χαρακτηρίζουν το/τα αντικείμενο/α.

      > Η κλάση Attiki_Odos περιέχει δύο ακέραιες μεταβλητές, η NSegs, η οποία είναι το πλήθος των τμημάτων που περιέχει ο αυτοκινητόδρομος και η no_of_vehicles όπου έχει αποθηκευμένο το πλήθος των οχημάτων που βρίσκονται μέσα στον αυτοκινητόδρομο.Τέλος το πιο σημαντικό της δεδομένο στον private χώρο που συμβάλλει στην επικοινωνία με τα υπόλοιπα αντικείμενα που περιλαμβάνονται στην δόμηση της Αττικής Οδού είναι segment_array (Segment **segment_array).

      > Η κλάση Segment περιέχει πέντε ακέραιες μεταβλητές.Η no_of_vehicles όπου έχει αποθηκευμένο το πλήθος των οχημάτων  που βρίσκονται μέσα στο τμήμα, η capacity που είναι η χωρητικότητα του τμήματος, η Percent είναι το ποσοστό των οχημάτων που τίθενται σε κατάσταση ετοιμότητας, η num_ready_vehicles είναι το πλήθος των έτοιμων οχημάτων και η segment_serial_number είναι ο αύξοντας αριθμός του τμήματος.Επιπλέον έχει ένα δείκτη entrance τύπου Εntrance (Entrance *entrance), που παριστάνει την εισοδο του τμήματος , αυτό δείχνει την σύνδεση των δύων κλάσεων.Επιπλέον μια μεταβλητή vehicles_array τύπου vector<Vehicle*> που θα έχει αποθηκευμένα τα αντικείμενα τύπου Vehicle.Τέλος έχει δύο δείκτες που δείχνουν στο προηγούμενο (Segment* previous_segment) και στο επόμενο τμήμα (Segment* next_segment).

      > Η κλάση Entrance περιέχει μια συμβολοσειρά που είναι το όνομα/ταυτότητα του κόμβου Node_Name, 3 ακέραιες μεταβλητές όπου η πρώτη num_tolls_employees έχει αποθηκευμένο το πλήθος των διοδίων με υπαλλήλους , η δευτερη num_electronic_tolls έχει αποθηκευμένο το πλήθος των ηλεκτρονικών διοδίων και η τελευταία num_of_tolls δείχνει το πλήθος των συνολικών διοδίων.Τέλος το πιο σημαντικό της δεδομένο στον private χώρο που συμβάλλει στην επικοινωνία με τα διόδια είναι η μεταβλητή tolls_array	(Toll **tolls_array).

      > Η κλάση Toll έχει τρεις ακέραιες μεταβλητές, την K που είναι ο μέγιστος αριθμός οχημάτων που μπορουν να περάσουν σε ένα τμήμα από τα διόδια, την num_of_vehicles όπου έχει αποθηκευμένο το πλήθος των οχημάτων που βρίσκονται στο διόδιο και τέλος η electr_or_empl, η οποία αν ισούται ίσο με το 1 δείχνει ότι το διόδιο είναι με υπάλληλο και αν είναι ίση με 0 δείχνει ότι είναι ηλεκτρονικό διόδιο.

      > Η κλάση Electronic έχει μια μεταβλητή vehicles_elec τύπου vector<Vehicle*> που θα έχει αποθηκευμένα τα αντικείμενα τύπου Vehicle, έτσι έρχονται σε επαφή οι δύο κλάσεις.


      > Η κλάση Employee έχει μια μεταβλητή vehicles_empl τύπου vector<Vehicle*> που θα έχει αποθηκευμένα τα αντικείμενα τύπου Vehicle, έτσι και εδώ έρχονται σε επαφή οι δύο κλάσεις.

      > Η κλάση Vehicle έχει 2 ακέραιες μεταβλητές , όπου η πρώτη output_node δείχνει το κόμβο εξόδου του οχήματος ,η δεύτερη current_segment δείχνει το τρέχον τμημα στο οποίο βρίσκεται το όχημα και τέλος δύο μεταβλητές τύπου bool, η πρώτη ready δείχνει αν το όχημα είναι έτοιμο και η δευτερη destination αν το όχημα έφτασε στον προορισμό του 

    Στο δημόσιο κομμάτι των κλάσεων εκτός από της συναρτήσεις κατασκευής καταστροφής έχουμε συναρτήσεις οι οποίες χρησιμοποιούνται για την εκπλήρωση αιτημάτων που δέχονται είτε από κάποιο αντικείμενο άλλης κλάσης είτε από τον χρήστη, αλλά και την επιτευξη διεργασιών της ίδιας της κλάσης, δηλαδή συναρτήσεις της ίδιας κλάσης συνεργάζονται.Τέλος έχουμε και τις συναρτήσεις, οι οποίες αποτελούν τα protected μέλη μιας βασικής κλάσης, συγκεκριμένα στην εργασία αυτή η βασική κλάση που έχει protected μέλη και είναι ορατά από τις συναρτήσεις των υποκλάσεων της είναι η Toll.Στο πρόβλημα μας οι συναρτήσεις της κλάσεις Attiki_Odos καλούνται από τον χρήστη για την εκπλήρωση αιτημάτων του.Ο χρήστης έρχεται σε επαφή με την Attiki_Odos για την δημιουργία της Αττικής Οδού, για να κάνει την προσομοίωση.



-Περιγραφή Προγράμματος:
  
  • Διεπαφή προσομοίωσης
Η κλάση Attiki_Odos είναι η διεπαφή μέσω της οποίας ένας χρήστης μπορεί να ξεκινήσει  να τρέχει την προσομοίωση.Συγκεκριμένα, για να ξεκινήσει η προσομοίωση, ο χρήστης πρέπει να δημιουργήσει ένα αντικείμενο τύπου Attiki_Odos και να επικαλεστεί τη μέθοδο oparate() της κλάσης Attiki_Odos.
  
  • Δομή Εργασίας
Κατα την δημιουργία του αντικειμένου Attiki_Odos δημιουργούνται και άλλα αντικείμενα για την πλήρη δόμηση του.Αρχικά δημιουργούνται τα NSegs τμήματα του αυτοκινητόδρομου, δηλαδή NSegs αντικείμενα του τύπου κλάσης Segment.Αυτα με την σειρά τους, για την δόμηση τους, απαιτούν την δημιουργία αντικειμένων τύπου κλάσης Vehicle, τυχαίου πλήθους που θα αναπαριστούν τα οχήματα που κινούνται στο τμήμα,αυτα τα αντικείμενα τύπου Vehicle αποθηκεύονται σε μια κλάση vector, vector<Vehicle*>, το οποίο είναι ιδιωτικό μέλος της κλάσης.Έπειτα θα δημιουργηθεί και η είσοδος του τμήματος της οποία η οργάνωση περιλαμβάνει την δημιουργία τυχαίων διοδίων.Τα αντικείμενα της κλάσης Toll κατηγοριοποιούνται στα διόδια που λειτουργούν με υπαλλήλους τα οποία αναπαρίστανται από την κλάση Employee και στα διόδια που λειτουργούν ηλεκτρονικά, τα οποία αναπαρίστανται από την κλάση Electronic.Το πλήθος των δύων κατηγοριών είναι τυχαίο σε κάθε είσοδο.Τέλος τα διόδια,για την συγκρότηση τους απαιτούν οχήματα, άρα δημιουργούνται αντικείμενα της αντίστοιχης κλάσης, τα οποία αποθηκεύονται σε μια κλάση vector, vector<Vehicle*>, το οποίο είναι ιδιωτικό μέλος της κλάσης.

  • Σχεδιαστικές Επιλογές  
Αρχικά ο χρήστης πρέπει να επικαλεστεί τη μέθοδο oparate() της κλάσης Attiki_Odos.Συγκεκριμένα η κλήση της συνάρτησης oparate() (της κλάσης Attiki_Odos) θα γίνει Ν φορές, όπου το Ν ορίζεται από τον χρήστη και δείχνει το πλήθος των προσομοιώσεων της Αττικής Οδού.Στην συνέχεια η oparate() (της κλάσης Attiki_Odos), διατρέχει όλα τα τμήματα που βρίσκονται σε αυτή, από το τελευταίο μέχρι το αρχικό καλώντας για το τρέχον τμήμα που εξετάζει κάθε φορά την συνάρτηση oparate() κλάσης Segment.Η λειτουργία της συνάρτησης oparate() (της κλάσης Segment) είναι να πραγματοποιεί την έξοδο οχημάτων από τον αυτοκινητόδρομο, μέσω της συνάρτησης exit() της Segment , την προσθήκη οχημάτων στο τρέχον τμήμα μέσω της enter() και τέλος να θέσει τυχαία οχήματα σε ετοιμότητα για τον νέο κύκλο προσομοίωσης.

Πιο αναλυτικά, η κλήση της exit() διατρέχει όλα τα στοιχεία του τμήματος και από αυτά, αυτά που είναι έτοιμα και το τρέχον τμήμα είναι το τμήμα προορισμού τους, θα φύγουν από τον αυτοκινητόδρομο.Αφού τελειώσει η εκτέλεση της, καλείται η συνάρτηση enter(), η οποία το πρώτο πράγμα που κάνει είναι να καλέσει την συνάρτηση pass() του προηγούμενου τμήματος, (αν το τρέχον τμήμα δεν είναι το πρώτο, γιατί το πρώτο δεν έχει προηγούμενο τμήμα) η οποία θα προσθέσει στο τμήμα οχήματα από το προηγούμενο τμήμα,αν υπάρχει χώρος.Πιο συγκεκριμένα:
	-- pass() --
	Η συνάρτηση pass() θα διατρέχει όλα τα οχήματα του προηγούμενου τμήματος ,αυτά που είναι έτοιμα και δεν έχουν φτάσει στον προορισμό τους, διότι αυτός είναι σε ένα επόμενο τμήμα, θα προστίθενται αν υπαρχει χωρος στο επόμενο τμήμα.Έτσι μειώνει από το τμήμα και αφαιρεί απο το vector τα οχήματα  που μεταβαίνουν στο επόμενο, προσθέτοντας τα στο vector και αυξάνοντας το πλήθος των οχημάτων στο επόμενο τμήμα.

Επιστρέφουμε στο σώμα της enter(), η οποία ελέγχει αν υπάρχει χώρος στο τμήμα για προσθήκη επιπλέον οχημάτων από την είσοδο.Επομένως αν υπάρχει χώρος καλείται η συνάρτηση operate() της κλάσης Entrance.Πιο συγκεκριμένα:
	-- operate() (class Entrance) --   
        Η λειτουργία της operate() είναι να αφαιρεί οχήματα από τα διόδια, τα οποία θα επιστραφούν στην συνάρτηση που την κάλεσε, δηλαδή την enter() της κλάσης Segment, ώστε να προστεθούν στο τμήμα. Τέλος θα προσθέτει νέα επιπλέον τυχαία οχήματα στα διόδια.Η αφαίρεση γίνεται μέσω της συνάρτησης vehicles_entrance_in_the_section(), η οποία καλεί την αντίστοιχη remove() του διοδίου ανάλογα με το είδος του (διόδια με υπαλλήλους/ηλεκτρονικά), ώστε να αφαιρέσει οχήματα σεβόμενη πάντα το μέγιστο ποσοστό εξυπηρέτησης, για τα διόδια με υπαλλήλους μέγιστο ποσοστό μέχρι Κ και για τα ηλεκτρονικά διόδια μέγιστο ποσοστό μέχρι 2Κ, αλλά και ταυτόχρονα το πλήθος που θα αφαιρεθεί να είναι μικρότερο ή ίσο της τρέχουσας κενής χωρητικότητας του τμήματος.Στο τέλος η vehicles_entrance_in_the_section() ελέγχει αν από τα διόδια πέρασαν Κ+2Κ οχήματα ή λιγότερα από αυτό το μέγιστο ποσοστό.Αν πέρασαν λιγότερα οχήματα από το μέγιστο αριθμό που μπορούν να εισέλθουν σε ένα τμήμα (Κ+2Κ) τότε το Κ μειώνεται κατά ένα μέσω της συνάρτησης set_data() της κλάσης Toll αλλιώς αυξάνεται το Κ κατά ένα, πάλι με την βοήθεια της set_data().Επιστρέφουμε στο σώμα της operate() (class Entrance) η οποία συνεχίζει με την προσθήκη νέων οχημάτων στα διόδια μέσω της add_random_vehicles().H add_random_vehicles() καλεί την αντίστοιχη add() του διοδίου ανάλογα με το είδος του, ώστε να προσθέσει νέα επιπλέον οχήματα στο διόδιο.Όταν τελειώσει την εκτέλεση της η add_random_vehicles η operate() της κλάσης Entrance τελειώνει επιστρέφοντας στην enter() ένα vector με τα οχήματα που αφαιρέθηκαν από τα διόδια, ώστε να τα προσθέσει στο τμήμα. 

Επιστρέφουμε στο σώμα της enter(), έχοντας λάβει τα οχήματα από την operate() της κλάσης Entrance τα αντιγράφει στην μεταβλητή veh τύπου vector<Vehicle*> και τα προσθέτει στο τμήμα.Τέλος η enter() εκτυπώνει διάφορες προειδοποιήσεις, αυτές είναι: αν ο αριθμός των οχημάτων που εξυπηρετούνται από τα διόδια και μεταβαίνουν στο τμήμα είναι μικρότερος από το μέγιστο ποσοστό Κ+2Κ,τότε εκτυπώνεται το μήνυμα, ότι υπάρχουν καθυστερήσεις στην είσοδο του κόμβου.Αν επιπρόσθετα το πλήθος οχημάτων που πέρασε στο τμήμα από το προηγούμενο τμήμα είναι μικρότερο από το πλήθος των οχημάτων που είναι έτοιμα τότε εκτυπώνεται η προειδοποίηση ότι υπάρχουν καθυστερήσεις μετά τον κόμβο.Αλλιώς αν δεν ισχύουν οι παραπάνω δύο συνθήκες εκτυπώνεται ένα μήνυμα προειδοποίησης ότι τα οχήματα πρέπει να τηρούν τις αποστάσεις ασφαλείας στο τμήμα μετά τον κόμβο.Τελειώνοντας την εκτέλεση της η enter() επιστρέφουμε στην oparate() της κλάσης Segment και θέτουμε τυχαία οχήματα που βρίσκονται στο τμήμα σε ετοιμότητα για τον νέο κύκλο προσομοίωσης. 

Στην εκτέλεση του προγράμματος έχω βάλει διάφορες βοηθητικές εκτυπώσεις για την κατανόηση της προσομοίωσης,όπως για παράδειγμα την εκτυπωση της Αττικής Οδού με τα τμήματα, τα διόδια και το πληθος των οχημάτων σε αυτά, πόσα οχήματα έφυγαν από την Αττική Οδό,ποσα οχήματα εισηλθαν από το προηγούμενο τμημα, οι πληροφοριες για τα οχήματα μετά από την ανάθεση ετοιμότητας κλπ. 


Στο τέλος καλούνται αυτόματα οι destructors για την καταστροφή των αντικειμένων.
